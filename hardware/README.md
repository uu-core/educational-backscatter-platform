# Pico-Backscatter: frontend
The implementation for the backscatter tag frontend on a four-layer FR4 PCB with 1oz copper thickness and a spacing of 0.2mm between the top and first inner layer for 50 ohm impedance matching.

### Usage notes
- The board can be used with the Maker Pi Pico (bottom connectors) or the Raspberry Pi Pico (top connectors). _Do not connect a RPI Pico and Maker Pi Pico at the same time._
- For power measurements, a power profiler can be connected to J5. Remember that the board should not be powered by two sources at the same time. Therefore, _unplug the USB from the RPI Pico before using an external power supply, such as a power profiler_. Just in case that two supplies get connected at the same time, they are be protected by a schottky diode. Therefore the board is supplied with about 0.25V less than provided (the voltage drop can be avoided by: supplying the voltage directly to the VSYS pin rather than J5, which avoids the diode and is therefore unprotected. Another alternative is to replace the diode with a mosfet in standard reverse voltage protection configuration).
- The board provides an interface to four SMA connectors for backscattering signals. This enables the use of antenna arrays and the resulting directivity/gain of different configurations can be generated using [Matlab's Antenna array design tool](https://se.mathworks.com/help/antenna/gs/design-and-analysis-using-antenna-array-designer-app.html).
- The board provides two connections for the ccRF click boards (Mikroe-1435 with the CC2500). They can be used as carrier generator and receiver.
- Notice that you can simulate a larger distance to the carrier by decreasing the transmission power in a static setup.

### Technical notes
- Each antenna is connected to an open or closed circuit based on a signal of the RPI Pico. This results in a reflection coefficient of +1 or -1, such that the incoming signal is always fully reflected either in phase (0째) or inverted (at 180째 phase). In the time domain, we can think of this as taking the carrier and multiplying it with a sequence of +1/-1, which is equivalent to a convolution in the frequency domain and can therefore be used as modulation.
- Consider an ambient carrier signal $f_c$ and the RPI Pico generating a baseband signal $f_b$, which controls the antenna switch. The backscattered signal will then be $f_{s} = f_c + f_b$. Since we have control of $f_b$, we can use $f_s$ directly to generate a Frequency-Shift Keying (FSK) or On-Off Keying (OOK). Since additionally the phase of the carrier is static, the phase of the backscattered signal $f_s$ is equal to the phase of the baseband signal $f_b$. This can be used to generate a Phase-Shift Keying (PSK). For example, increasing the frequency of $f_b$ by 1 MHz and changing its phase by 90째, will also change the frequency and phase of the backscattered signal $f_s$ by 1 MHz and phase of 90째. Finally, due to the spectrum of a sinus, we obtain a second (mirrored) image of $f_s$ at $f_m = f_c - f_b$ which we can ignore for now. Since the baseband signal is also a square-wave and not a sinus, the backscattered signal will have harmonic overtones above $f_s$ and below $f_m$, which we can also ignore for now. However, you can find the mirrored image on the spectrum analyzer and also the overtones at a sufficiently large Signal-to-Noise ratio (SNR).
- The switch that controls the antenna termination could be implemented with a simple MOSFET. However, using an RF-switch provides a better impedance matching and control. Therefore, this platform uses the design of Ambuj Varshney and uses the [HMC190BMS8E](https://www.analog.com/media/en/technical-documentation/data-sheets/hmc190b.pdf). RF-switches can be categorized into having reflective (open circuit) or absorptive ($50 \Omega$ matching) inputs while not being selected to connect to the output. The HMC190BMS8E is a reflective RF-switch. Therefore, we can connect the antenna to its _input_. While the antenna is not selected as input, the RF-switch represents an open circuit (reflection coefficient +1). Now, we can terminate the output of the RF-switch directly to ground to generate the short circuit (reflection coefficient -1). The baseband signal of the RPI Pico controls if the antenna input connects to the output of the RF-switch or not and therefore changes the reflection coefficient at the antenna as described above between +1/-1.
